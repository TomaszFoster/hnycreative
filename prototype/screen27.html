<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/foundation.css" />
    <script src="js/vendor/modernizr.js"></script>
  </head>
  <body>

    <!-- Back Button -->
    <div class="row">
      <div class="small-12 columns">
        <button class="button" onclick="history.back();">Back</button>
        <hr> <!-- page break -->
      </div>
    </div>

    <div class="row">
      <div class="small-4 columns">
        <img src="img/logo.png"/>
      </div>
      <div class="small-8 columns">
        <h2 class="bDescription">Business Detail</h2>
        <h3 class="bCategories"></h3>
        <p>Some random information about the business</p>
      </div>
    </div>

    <div class="row">
      <div class="small-12 columns">
        <img class="bLogo" style="width:100%;"/>
        <p>Some random information about the business<br>
        I would put some lorem ipsum but I'm getting sick of latin<br>
        and frankly I'm sure you are as well. It's a dead language<br>
        or so they say</p>
      </div>
    </div>

    <div class="row">
      <div class="small-4 columns">
        <h2>Address</h2>
      </div>
      <div class="small-8 columns">
        <p class="bFullAddress"></p>
        <a class="button right bDirections">Open in Maps</a>
      </div>
    </div>

    <div class="row">
      <div class="small-4 columns">
        <h2>Phone:</h2>
      </div>
      <div class="small-8 columns">
        <p class="bPhone"></p>
        <a href="#" class="button right bPhoneCall">Call Now</a>
      </div>
    </div>

    <div class="row">
      <div class="small-4 columns">
        <h2>Website:</h2>
      </div>
      <div class="small-8 columns">
        <a class="bWebsite"></a>
      </div>
    </div>

    <div class="row">
      <div class="small-12 columns">
        <ul class="small-block-grid-4">
          <!-- Placeholders for the social media icons on the bottom -->
          <li><a href="#"><img src="img/badgeFull.png"/></a></li>
          <li><a href="#"><img src="img/badgeFull.png"/></a></li>
          <li><a href="#"><img src="img/badgeFull.png"/></a></li>
          <li><a href="#"><img src="img/badgeFull.png"/></a></li>
        </ul>
      </div>
    </div>

    <script src="js/vendor/jquery.js"></script>
    <script src="js/foundation.min.js"></script>
    <script>
      $(document).foundation();

      $.ajax({
          url: "http://localhost/getBusinessInfo.php",
          type: "GET",
          dataType: "json",
          success: function (incomingJson) {
            //console.log(incomingJson);
            populateInfo(incomingJson);
          },
          error: function(response) {
              console.log(response);
              console.log('Test failed!');                  
          }
      });

      function populateInfo(incomingJson){
        //console.log(incomingJson);
        jsonInfo = incomingJson['11782'];
        $('.bLogo').attr("src",jsonInfo['bLogo']);
        $('.bWebsite').attr("href",jsonInfo['bWebsite']);
        $('.bWebsite').html(jsonInfo['bWebsite'].substr(7));
        $('.bPhone').html(jsonInfo['bPhone']);
        $('.bPhoneCall').attr("href", "tel:"+jsonInfo['bPhone']);
        $('.bDirections').attr("href", jsonInfo['bDirections']);
        $('.bFullAddress').html(jsonInfo['bAddress']+"<br>"+jsonInfo['bCity']+", "+jsonInfo['bState']+
          " "+jsonInfo['bZip']);
        $('.bCategories').html(jsonInfo['bCategory']+" | "+jsonInfo['bSubCat1']+
          " | "+jsonInfo['bSubCat2']+" | "+jsonInfo['bSubCat3']);
      }
    </script>
  </body>
</html>
