<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/foundation.css" />
    <script src="js/vendor/modernizr.js"></script>
  </head>
  <body>

    <!-- OffCanvas Menu / Navigation -->
    <div class="off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">
        <nav class="tab-bar">
          <section class="left-small">
            <a class="left-off-canvas-toggle menu-icon" href="#"><span></span></a>
          </section>

          <section class="middle tab-bar-section text-center">
            <h1 class="title">LoveVA</h1>
          </section>
          
        </nav>

        <aside class="left-off-canvas-menu">
          <ul class="off-canvas-list">
            <li><a href="#">Scan A Purchase</a></li>
            <li><a href="screen24.html">Your Badges</a></li>
            <li><a href="screen17.html">Find A Business</a></li>
            <li><a href="#">Find Nearby</a></li>
            <li><a href="screen22.html">Browse Rewards</a></li>
            <li><a href="screen25.html">User Settings</a></li>
          </ul>
        </aside>

        <section class="main-section">

            <!-- main content goes here -->
            <!-- Splashscreen Logo Placeholder -->
            <div class="row">
              <div class="small-4 columns">
                <p>Welcome,</p>
                <p class="firstName">Melissa!</p>
              </div>
              <div class="small-3 columns text-center">
                <img style="width:100%;" src="img/badgeLatest.png" />
              </div>
              <div class="small-5 columns">
                <p>Latest Badge</p>
                <p class="latestBadgeLocation">Norfolk, VA</p>
              </div>
              <hr>
            </div>

            <!-- Gallery of full and empty hearts with placeholders -->
            <div class="row">
              <div class="small-12 columns">
                <ul class="small-block-grid-5 text-center userHearts">
                  <li><img src="img/badgeEmpty.png"/></li>
                  <li><img src="img/badgeEmpty.png"/></li>
                  <li><img src="img/badgeEmpty.png"/></li>
                  <li><img src="img/badgeEmpty.png"/></li>
                  <li><img src="img/badgeEmpty.png"/></li>
                  <li><img src="img/badgeEmpty.png"/></li>
                  <li><img src="img/badgeEmpty.png"/></li>
                  <li><img src="img/badgeEmpty.png"/></li>
                  <li><img src="img/badgeEmpty.png"/></li>
                  <li><img src="img/badgeEmpty.png"/></li>
                </ul>
              </div>
            </div>

            <!-- Buttons to show when 10 hearts received -->

            <div class="row">
              <div class="small-6 columns text-center">
                <button class="button large">Redeem<br>Reward</button>
              </div>
              <div class="small-6 columns text-center">
                <a href="/screen23.html" class="button large">Gift A<br>Reward</a>
              </div>
            </div>

            <hr>

            <!-- Scan a Purchase and Find a business Buttons -->

            <div class="row">
              <div class="small-6 columns text-center">
                <button class="button large">Scan A<br>Purchase</button>
              </div>
              <div class="small-6 columns text-center">
                <a class="button large" href="screen17.html">Find A<br>Business</a>
              </div>
            </div>

          <!-- close the off-canvas menu -->
          </section>

      <a class="exit-off-canvas"></a>

      </div>
    </div>

    
    <script src="js/vendor/jquery.js"></script>
    <script src="js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      $.ajax({
          url: "http://localhost/getUserInfo.php",
          type: "GET",
          dataType: "json",
          success: function (incomingJson) {
            //console.log(incomingJson);
            populateInfo(incomingJson);
          },
          error: function(response) {
              console.log(response);
              console.log('Test failed!');                  
          }
      }); 
      function populateInfo(incomingJson){
            //console.log(incomingJson);
              console.log(incomingJson);
              $('.firstName').html(incomingJson['firstName']);
              $('.latestBadgeLocation').html(incomingJson['latestBadgeLocation']);
              //$('.bName').html(jsonInfo['bName']);
              for(i=0;i<incomingJson['numberOfHearts'];i++){
                //console.log(i);
                $('ul.userHearts li img:eq('+i+')').attr("src", 'img/badgeFull.png');
                
              }
          }
    </script>
  </body>
</html>
